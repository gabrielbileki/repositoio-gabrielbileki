name: Alerta Discord com curl

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main
  issues:
    types: [opened]
  workflow_dispatch:

jobs:
  alerta-push-pr:
    runs-on: ubuntu-latest
    if: github.event_name == 'push' || github.event_name == 'pull_request'
    steps:
      - name: Alerta de Push ou PR
        run: |
          curl -H "Content-Type: application/json" \
          -X POST \
          -d '{"content":"ğŸš¨ Novo push ou PR na branch main!\nğŸ§‘ Autor: '${{ github.actor }}'\nğŸ“ Commit: '${{ github.event.head_commit.message || github.event.pull_request.title }}'"}' \
          ${{ secrets.DISCORD_WEBHOOK }}

  alerta-issue:
    runs-on: ubuntu-latest
    if: github.event_name == 'issues'
    steps:
      - name: Alerta de nova Issue
        run: |
          curl -H "Content-Type: application/json" \
          -X POST \
          -d '{"content":"ğŸ“¬ Nova issue aberta!\nğŸ§‘ Autor: '${{ github.actor }}'\nğŸ“Œ TÃ­tulo: '${{ github.event.issue.title }}'"}' \
          ${{ secrets.DISCORD_WEBHOOK }}

  alerta-manual:
    runs-on: ubuntu-latest
    if: github.event_name == 'workflow_dispatch'
    steps:
      - name: Alerta manual
        run: |
          curl -H "Content-Type: application/json" \
          -X POST \
          -d '{"content":"ğŸ§ª Alerta manual disparado via GitHub Actions!"}' \
          ${{ secrets.DISCORD_WEBHOOK }}
